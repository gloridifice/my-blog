<!DOCTYPE html><html>
  <head lang="zh_CN">
    <meta http-equiv="Content-Type" content="charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/assets/js/header.js"></script>
    <link rel="stylesheet" href="/assets/css/reset.css">
    <link rel="stylesheet" href="/assets/css/root.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;600;700&amp;display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/layout.css">
    <link rel="stylesheet" href="/assets/css/post.css">
    <link rel="stylesheet" href="/assets/css/color_scheme_v2.dark_mode.css">
    <title>🗒️ Notion API 小记</title>
  </head>
  <body>
    <div class="post">
      <div class="catalogue">
        <div>
          <ul>
            <li class="h1"><a href="#heading1_0">
                <t>前言</t>
              </a></li>
            <li class="h1"><a href="#heading1_1">
                <t>基本概念</t>
              </a></li>
            <li class="h1"><a href="#heading1_2">
                <t>获取数据库(Database)内容</t>
              </a></li>
            <li class="h1"><a href="#heading1_3">
                <t>获取文章(Page)内容</t>
              </a></li>
            <li class="h1"><a href="#heading1_4">
                <t>容易遗漏的点</t>
              </a></li>
          </ul>
        </div>
      </div>
      <div class="navi"><a href="/home.html">Home</a><a href="/about.html">About</a><a href="https://gloridifice.notion.site/3659ec2ee2f7498ab744662c364b518a?v=0d711eab95f748eb82a966726ec3f757&amp;pvs=4">Notes</a></div>
      <div class="sidebar_wrapper_left sidebar_wrapper"></div>
      <div class="sidebar_wrapper_right sidebar_wrapper"></div>
      <div class="contents">
        <div class="page_description">
          <h1 class="title">🗒️ Notion API 小记</h1>
          <div class="sub_info">
            <p class="date">2023-12-28</p>
            <div class="type_tags">
              <p class="tag">Notion</p>
              <p class="type">Dev</p>
            </div>
          </div>
        </div>
        <div class="page_contents">
          <h1 id="heading1_0">
            <t>前言</t>
          </h1>
          <p>
            <t>Notion API</t>
          </p>
          <div class="bookmark_block">
            <div class="bookmark" onclick="window.open('https://developers.notion.com/')">
              <div class="title">https://developers.notion.com/</div>
              <div class="url">https://developers.notion.com/</div>
            </div>
            <div class="caption"></div>
          </div>
          <p>
            <t>不同的语言有不同的 Notion API 的库，本文章只做概念上的记录。</t>
          </p>
          <h1 id="heading1_1">
            <t>基本概念</t>
          </h1>
          <p>
            <t>id 是 Notion 的所有对象都有一个重要的标识，在获取数据需要使用 id，保存数据时也可以使用 id 以避免文件名称重复。</t>
          </p>
          <ul>
            <li>
              <t>Database：数据库</t>
            </li>
          </ul>
          <ul>
            <li>
              <t>Page：文章</t>
            </li>
          </ul>
          <ul>
            <li>
              <t>Block：文章内容的基本单位</t>
              <div class="image_wrapper"><img src="/post/4cc10f21-d5a0-41a9-af7c-03bf157e2789/img_a24b8653-6158-47bd-9a07-83ae6340fc53.png">
                <div class="caption">
                  <t>拖拽选中一个 block 会被高亮</t>
                </div>
              </div>
            </li>
          </ul>
          <p></p>
          <blockquote>
            <t>下文中带有 # 的内容代表可以在 Notion API 中搜索关键字查到</t>
          </blockquote>
          <h1 id="heading1_2">
            <t>获取数据库(Database)内容</t>
          </h1>
          <p>
            <t>获取数据库的内容要通过 #Query database 的方式，返回值包括了 database 的所有 page</t>
          </p>
          <h1 id="heading1_3">
            <t>获取文章(Page)内容</t>
          </h1>
          <p>
            <t>一个文章的内容本身其实是一个 block，其内容是该 block 的子 block.</t>
          </p>
          <p>
            <t>而文章的 id 和其根 block 的 id 是相同的，因此只需要用 #Retrieve block children 递归地获取子 block 就可以得到一篇文章的所有内容了。</t>
          </p>
          <p>
            <t>记得 #Retrieve block children 只能获取一个 block 的子 block 的信息，我们还要用 #Retrieve block 来获取方块本身的信息。</t>
          </p>
          <p></p>
          <h1 id="heading1_4">
            <t>容易遗漏的点</t>
          </h1>
          <p>
            <t>创建一个 token（Integration） 后，我们还需要在一个数据库或者文章的右上角省略号设置的 connections 中加上对应的 Integration，这样该 Integration 才有读取或操作对应数据库和文章和的权限。</t>
          </p>
          <div class="image_wrapper"><img src="/post/4cc10f21-d5a0-41a9-af7c-03bf157e2789/img_7019f599-62fd-48fa-846b-92218cd0559c.png">
            <div class="caption"></div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
