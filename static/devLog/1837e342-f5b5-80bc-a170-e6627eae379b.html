<!DOCTYPE html><html>
  <head lang="zh_CN">
    <meta http-equiv="Content-Type" content="charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/assets/js/header.js"></script>
    <script src="/assets/katex/katex.js"></script>
<script defer src="/assets/katex/auto-render.min.js" onload="renderMathInElement(document.body);"></script>    <script>document.addEventListener(&quot;DOMContentLoaded&quot;, function() {
    renderMathInElement(document.body, {
      delimiters: [
          {left: '$$', right: '$$', display: false},
      ],
      throwOnError : false
    });
});</script>
    <link rel="stylesheet" href="/assets/katex/katex.css">
    <link rel="stylesheet" href="/assets/css/reset.css">
    <link rel="stylesheet" href="/assets/css/root.css">
    <link rel="stylesheet" href="/assets/css/color_scheme_v2.dark_mode.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;600;700&amp;display=swap" rel="stylesheet">
    <script src="/assets/js/highlightjs/highlight.js"></script>
    <link rel="stylesheet" href="/assets/css/layout.css">
    <link rel="stylesheet" href="/assets/css/page_content.css">
    <link rel="stylesheet" href="/assets/css/post.css">
    <link rel="stylesheet" href="/assets/css/color_scheme_v2.dark_mode.css">
    <link rel="stylesheet" href="/assets/css/highlightjs/github-dark.css">
    <title>ğŸ¦† å»¶è¿Ÿæ¸²æŸ“ç®¡çº¿ã€å¾®è¡¨é¢ BRDFã€æ³•çº¿å˜æ¢ã€ç‰©ä½“ç»§æ‰¿æ ‘ UIï½œWgpu PBR å¼€å‘æ—¥å¿— #0002</title>
  </head>
  <body>
    <script>hljs.highlightAll();</script>
    <div class="post">
      <div class="catalogue">
        <div>
          <ul>
            <li class="h1"><a href="#heading1_0">
                <t>æ³•çº¿å˜æ¢</t>
              </a></li>
            <li class="h1"><a href="#heading1_1">
                <t>å»¶è¿Ÿæ¸²æŸ“ç®¡çº¿</t>
              </a></li>
            <li class="h2"><a href="#heading2_0">
                <t>Write G-Buffer Pass</t>
              </a></li>
            <li class="h2"><a href="#heading2_0">
                <t>Main Pass</t>
              </a></li>
            <li class="h3"><a href="#heading3_0">
                <t>Full screen vertex shader</t>
              </a></li>
            <li class="h3"><a href="#heading3_1">
                <t>Bindings</t>
              </a></li>
            <li class="h1"><a href="#heading1_2">
                <t>ç‚¹å…‰æº</t>
              </a></li>
            <li class="h2"><a href="#heading2_2">
                <t>Radiance of a Point Light</t>
              </a></li>
            <li class="h2"><a href="#heading2_2">
                <t>éå†å…‰æº</t>
              </a></li>
            <li class="h1"><a href="#heading1_3">
                <t>å¾®è¡¨é¢ BRDF</t>
              </a></li>
            <li class="h1"><a href="#heading1_4">
                <t>æ›´å¥½çš„ Editor UI</t>
              </a></li>
            <li class="h2"><a href="#heading2_2">
                <t>Material Override</t>
              </a></li>
            <li class="h1"><a href="#heading1_5">
                <t>å‚è€ƒèµ„æ–™</t>
              </a></li>
          </ul>
        </div>
      </div>
      <div class="navi"><a class="navi_link" href="/home.html">ä¸»é¡µ</a><a class="navi_link" href="/blogs.html">åšå®¢</a><a class="navi_link" href="/portfolio.html">é¡¹ç›®</a><a class="navi_link" href="/about.html">å…³äº</a></div>
      <div class="sidebar_wrapper_left sidebar_wrapper"></div>
      <div class="sidebar_wrapper_right sidebar_wrapper"></div>
      <div class="contents">
        <div class="header"><a class="navi_link" href="/home.html">ä¸»é¡µ</a><a class="navi_link" href="/blogs.html">åšå®¢</a><a class="navi_link" href="/portfolio.html">é¡¹ç›®</a><a class="navi_link" href="/about.html">å…³äº</a></div>
        <div class="page_description">
          <h1 class="title">ğŸ¦† å»¶è¿Ÿæ¸²æŸ“ç®¡çº¿ã€å¾®è¡¨é¢ BRDFã€æ³•çº¿å˜æ¢ã€ç‰©ä½“ç»§æ‰¿æ ‘ UIï½œWgpu PBR å¼€å‘æ—¥å¿— #0002</h1>
          <div class="sub_info">
            <p class="date">2025-01-25</p>
          </div>
        </div>
        <div class="page_content">
          <div class="image_wrapper"><img src="/devLog/1837e342-f5b5-80bc-a170-e6627eae379b/img_1867e342-f5b5-8075-965e-e7160149866c.gif">
            <div class="caption"></div>
          </div>
          <h1 id="heading1_0">
            <t>æ³•çº¿å˜æ¢</t>
          </h1>
          <p>
            <t>æ³•çº¿çš„å˜æ¢å—æ¨¡å‹æ—‹è½¬å’Œç¼©æ”¾çš„å½±å“ã€‚ä½†ç¼©æ”¾ä¼šä½¿æ³•çº¿å˜æ¢å‘ç”Ÿé”™è¯¯ï¼Œä¸èƒ½ç›´æ¥ç”¨æ¨¡å‹ç¼©æ”¾å’Œæ—‹è½¬çš„åˆå˜æ¢æ¥åšã€‚Jason L. McKesson çš„ </t>
            <t class="href" onclick="window.open('/1737e342f5b580499966c8b906b26558')">è¿™ç¯‡æ–‡ç« </t>
            <t> ä»‹ç»äº†æ³•çº¿å˜æ¢çŸ©é˜µçš„åŸç†å’Œè®¡ç®—æ–¹æ³•ã€‚è¿™é‡Œç›´æ¥å¸å‡ºç»“è®ºï¼š</t>
          </p>
          <div class="equation">$$N_{ormal} = (M_{scale\_rotation}^{-1})^T$$</div>
          <p>
            <t>è¿™ä¸ªå…¬å¼ä¼šå¯¹çŸ©é˜µè¿›è¡Œé€†è¿ç®—ï¼Œå¦‚ä½•å®‰å…¨å¿«é€Ÿåœ°æ±‚é€†ï¼š</t>
          </p>
          <blockquote>
            <t>ä¸‹æ–‡ä¼šç”¨ </t>
            <t class="code">./</t>
            <t> ç¬¦å·ï¼Œå¦‚ </t>
            <t class="code">A ./ B</t>
            <t> ï¼Œè¡¨ç¤ºä¸€ç§è¿ç®—ï¼šå¯¹ B çš„æ‰€æœ‰éé›¶å…ƒç´ å–å€’æ•°åï¼Œä¸ A çš„å…ƒç´ é€ä¸ªç›¸ä¹˜ã€‚
* å› ä¸ºæ—‹è½¬å’Œç¼©æ”¾å˜æ¢éƒ½æ˜¯ 3x3 çŸ©é˜µå³å¯è¡¨è¾¾ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æ³•çº¿å˜æ¢çŸ©é˜µåªéœ€è¦ä¸€ä¸ª 3x3 çŸ©é˜µï¼Œæœ¬èŠ‚ä¸‹æ–‡ä¸­çŸ©é˜µå‡ä¸º 3x3</t>
          </blockquote>
          <ul>
            <li>
              <t>æ—‹è½¬çŸ©é˜µï¼ˆä¸‹æ–‡ç§° Rï¼‰æ˜¯å¯é€†çš„ï¼Œå…¶ç‰¹æ€§æ˜¯å…¶é€†çŸ©é˜µç­‰äºå…¶è½¬ç½®çŸ©é˜µï¼Œæ‰€ä»¥å¯¹æ—‹è½¬çŸ©é˜µæ±‚é€†æ˜¯å®‰å…¨çš„ï¼š</t>
              <t class="code">invert(R) = transpose(R)</t>
            </li>
          </ul>
          <ul>
            <li>
              <t>ç¼©æ”¾çŸ©é˜µï¼ˆä¸‹æ–‡ç§° Sï¼‰æ˜¯ä¸€ä¸ªå¯¹è§’çŸ©é˜µï¼Œå…¶åœ¨å¯¹è§’çº¿å…ƒç´ ä¸ä¸ºé›¶çš„æƒ…å†µä¸‹æ˜¯å¯é€†çš„ï¼Œå¹¶ä¸”å…¶ç»“æœæ˜¯å„å…ƒç´ å–å€’ï¼š</t>
              <t class="code">invert(S) = 1 ./ S</t>
            </li>
          </ul>
          <ul>
            <li>
              <t>æ ¹æ®çŸ©é˜µç§¯çš„æ±‚é€†å’Œè½¬ç½®æ€§è´¨ï¼Œæˆ‘ä»¬æœ‰ï¼š</t>
            </li>
          </ul>
          <div class="equation">$$\begin{cases}
S^{-1} = 1\ ./\ S \\
R^{-1} = R ^ T \\
M^T=(RS)^{-1}=S^{-1}R^{-1} \\
N_{ormal} = (M^{-1})^T
\end{cases}
\\ \ 
\\
\implies N = (S^{-1}R^{-1})^T=(R^{-1})^T (S^{-1})^T=(R^T)^T(1./S)^T$$</div>
          <p>
            <t>æœ€ç»ˆå¾—åˆ°çš„ç»“æœæ˜¯</t>
          </p>
          <div class="equation">$$N_{ormal} = R\  ./\  S$$</div>
          <p>
            <t>ä»£ç å®ç°</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">const MIN_SCALE: f32 = 0.001;
pub fn model_normal_matrix(&amp;self) -&gt; (Mat4, Mat3) {
    let translation = Matrix4::from_translation(self.position);
    let scale = Matrix4::from_nonuniform_scale(self.scale.x, self.scale.y, self.scale.z);
    let rotation = Matrix4::from(self.rotation);
    #[rustfmt::skip]
    let scale_t = Matrix3::new(
        1. / self.scale.x.max(Self::MIN_SACLE), 0.0, 0.0,
        0.0, 1. / self.scale.y.max(Self::MIN_SACLE), 0.0,
        0.0, 0.0, 1. / self.scale.z.max(Self::MIN_SACLE)
    );
    let model_matrix = translation * rotation * scale;
    let normal_matrix = Matrix3::from_cols(
        rotation.x.truncate(),
        rotation.y.truncate(),
        rotation.z.truncate(),
    ) * scale_t;
    (model_matrix, normal_matrix)
}</code></pre>
            </div>
            <div class="caption">
              <t>æ•°å­¦åº“: cgmath</t>
            </div>
          </div>
          <h1 id="heading1_1">
            <t>å»¶è¿Ÿæ¸²æŸ“ç®¡çº¿</t>
          </h1>
          <p>
            <t>ç›®å‰é¡¹ç›®å»¶è¿Ÿæ¸²æŸ“ç®¡çº¿å®ç°æ–¹å¼æ˜¯å°†ä¸€ç³»åˆ—è®¡ç®—å…‰ç…§ç”¨çš„å‡ ä½•æ•°æ®æ¸²æŸ“æˆä¸€ç³»åˆ—çº¹ç†ï¼ˆä¸€èˆ¬è¢«ç§°ä¸º Geometry Buffer &lt;G-Buffer&gt;ï¼‰ï¼Œç„¶ååœ¨è®¡ç®— Pass ä¸­é‡‡æ ·å¹¶è®¡ç®—åƒç´ é¢œè‰²ã€‚</t>
          </p>
          <h2 id="heading2_0">
            <t>Write G-Buffer Pass</t>
          </h2>
          <p>
            <t>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå†™å…¥ G-Buffer çš„ Pass æˆ‘ä»¬éœ€è¦çš„å‡ ä½•ä¿¡æ¯å†™å…¥å¤šä¸ªçº¹ç†ï¼Œwgpu æ”¯æŒå¤šç›®æ ‡æ¸²æŸ“çš„ï¼Œå¯ä»¥å°†ç‰‡æºç€è‰²å™¨ç»“æœè®¾ä¸ºå¤šä¸ªç›®æ ‡ã€‚å…·ä½“å®ç°æ˜¯ï¼šåœ¨åˆ›å»ºæ¸²æŸ“ç®¡çº¿æ—¶éœ€è¦æŒ‡å®š targetsï¼ˆæ˜¯ä¸€ä¸ª</t>
            <t class="code"> Option&lt;ColorTargetState&gt;</t>
            <t> çš„æ•°ç»„ï¼Œ</t>
            <t class="code">ColorTargetState</t>
            <t> å£°æ˜äº† Target çš„çº¹ç†æ ¼å¼ã€æ··åˆæ¨¡å¼ä»¥åŠå†™å…¥è’™ç‰ˆï¼‰ã€‚</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">fragment: Some(wgpu::FragmentState {
  module: &amp;shader,
  entry_point: &quot;fs_main&quot;,
  targets: &amp;targets, // &amp;[Option&lt;ColorTargetState&gt;]
  compilation_options: wgpu::PipelineCompilationOptions::default(),
}),</code></pre>
            </div>
            <div class="caption"></div>
          </div>
          <p>
            <t>Write G-Buffer çš„æ¸²æŸ“ç›®æ ‡ç›®å‰æ˜¯å››ä¸ª Rgba8Unorm çš„å‚æ•°ï¼Œæ¡†æ¶å’Œ wgsl å¦‚ä¸‹è¡¨ï¼š</t>
          </p>
          <div class="table">
            <table>
              <tr class="table_header">
                <td class="table_header"></td>
                <td>Targets</td>
                <td>Texture Format</td>
              </tr>
              <tr>
                <td class="table_header">1</td>
                <td>World Pos Tex</td>
                <td>Rgba8Unorm</td>
              </tr>
              <tr>
                <td class="table_header">2</td>
                <td>Normal Tex</td>
                <td>Rgba8Unorm</td>
              </tr>
              <tr>
                <td class="table_header">3</td>
                <td>Base Color Tex</td>
                <td>Rgba8Unorm</td>
              </tr>
              <tr>
                <td class="table_header">5</td>
                <td>PBR Parameters Tex</td>
                <td>Rgba8Unorm</td>
              </tr>
            </table>
          </div>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">// write_g_buffer.wgsl
struct FragmentOutput{
    @location(0) world_pos: vec4&lt;f32&gt;,
    @location(1) normal: vec4&lt;f32&gt;,
    // For PBR
    @location(2) base_color: vec4&lt;f32&gt;,
    @location(3) pbr_parameters: vec4&lt;f32&gt;, // 0: Metallic, 1: Roughness, 2: Reflectance, 3: Ambient occlusion
}

...
@fragment
fn fs_main(in: VertexOutput) -&gt; FragmentOutput { 
...</code></pre>
            </div>
            <div class="caption">
              <t>åœ¨ wgsl ä¸­ï¼Œå¯ä»¥ç”¨ç»“æ„ä½“çš„æ–¹å¼ä¹¦å†™å¤šç›®æ ‡</t>
            </div>
          </div>
          <h2 id="heading2_1">
            <t>Main Pass</t>
          </h2>
          <p>
            <t>å¾—åˆ°äº†æœ‰å…³å‡ ä½•ä¿¡æ¯çš„è´´å›¾åï¼Œåœ¨åç»­çš„ä»»ä½• Pass ä¸­ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä½¿ç”¨ä»–ä»¬ã€‚å»¶è¿Ÿæ¸²æŸ“ç®¡çº¿ä¸­çš„ä¸» Pass åˆæ—¶è¢«ç§°ä¸º Compute Passï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™æ˜¯ç”¨ Compute Shader å®ç°çš„ã€‚è¿™æ ·åšåœ¨å…‰æºå‰”é™¤ä¸Šæœ‰å¥½å¤„ã€‚æˆ‘è¿˜æ²¡æœ‰è¿™ä¹ˆåšï¼Œæ˜¯ä¸€ä¸ªéœ€è¦åç»­ä¼˜åŒ–çš„åœ°æ–¹ã€‚æˆ‘ç›´æ¥ä½¿ç”¨äº†ä¸€ä¸ªå…¨å±å¹• Vertex Shader æ¥å®ç°ã€‚</t>
          </p>
          <h3 id="heading3_0">
            <t>Full screen vertex shader</t>
          </h3>
          <p>
            <t>æˆ‘ä»¬å”¯ä¸€çš„è¾“å…¥æ˜¯ vertex_index: u32ï¼Œè¿™æ˜¯ç€è‰²å™¨å†…ç½®çš„è¾“å…¥ä¿¡æ¯ï¼Œé€šè¿‡ </t>
            <t class="code">@builtin(vertex_index)</t>
            <t> å£°æ˜å®ƒã€‚</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">@vertex
fn vs_main(
    @builtin(vertex_index) vertex_index: u32,
) -&gt; VertexOutput {
    let uv = vec2&lt;f32&gt;(f32(vertex_index &gt;&gt; 1u), f32(vertex_index &amp; 1u)) * 2.0;
    let clip_position = vec4&lt;f32&gt;(uv * vec2&lt;f32&gt;(2.0, -2.0) + vec2&lt;f32&gt;(-1.0, 1.0), 0.0, 1.0);
    return VertexOutput(clip_position, uv);
}</code></pre>
            </div>
            <div class="caption">
              <t>fullscreen_vertex_shader.wgsl</t>
            </div>
          </div>
          <p>
            <t>åœ¨æ¸²æŸ“è°ƒç”¨æ—¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦æŒ‡å®šé¡¶ç‚¹çš„ç»“æ„ï¼Œä¹Ÿä¸éœ€è¦ä»»ä½• Bufferï¼Œåªè¦ç»˜åˆ¶åºå·ä¸º 0, 1, 2 çš„é¡¶ç‚¹å°±å¯ä»¥äº†ã€‚æˆ‘ä»¬åªç”¨åˆ°äº†ä¸‰ä¸ªé¡¶ç‚¹ï¼Œä¸‰ä¸ªé¡¶ç‚¹æ˜¯å¦‚ä¸‹å›¾çš„æ–¹å¼è¿ä½œçš„ï¼š</t>
          </p>
          <div class="column_list">
            <div class="column">
              <div class="code_block">
                <div class="code_part">
                  <div class="code_lang">rust</div>
                  <pre><code class="language-rust">fn render(){
...
  render_pass.draw(0..3, 0..1);
...
}</code></pre>
                </div>
                <div class="caption"></div>
              </div>
            </div>
            <div class="column">
              <div class="image_wrapper"><img src="/devLog/1837e342-f5b5-80bc-a170-e6627eae379b/img_1837e342-f5b5-8011-aa18-ccd13507d9e7.png">
                <div class="caption">
                  <t>é¢çš„å‰æ–¹ï¼šå·¦æ‰‹ç³»é€†æ—¶é’ˆ (CCW) </t>
                </div>
              </div>
            </div>
          </div>
          <h3 id="heading3_1">
            <t>Bindings</t>
          </h3>
          <div class="column_list">
            <div class="column">
              <p>
                <t>å…³äº G-Buffer çš„éƒ¨åˆ†æˆ‘ä¼ å…¥ä¸» Pass çš„å‚æ•°å¦‚å³å›¾ã€‚å› ä¸ºæ‰€æœ‰è´´å›¾çš„é‡‡æ ·æ–¹å¼éƒ½æ˜¯ No Filter (Nearest)ï¼ŒClampToEdge. æ‰€ä»¥åªéœ€è¦ä¸€ä¸ªé‡‡æ ·å™¨å°±å¯ä»¥äº†ã€‚</t>
              </p>
              <div class="code_block">
                <div class="code_part">
                  <div class="code_lang">rust</div>
                  <pre><code class="language-rust">wgpu::SamplerDescriptor {
  address_mode_u: wgpu::AddressMode::ClampToEdge,
  address_mode_v: wgpu::AddressMode::ClampToEdge,
  address_mode_w: wgpu::AddressMode::ClampToEdge,
  mag_filter: wgpu::FilterMode::Nearest,
  min_filter: wgpu::FilterMode::Nearest,
  mipmap_filter: wgpu::FilterMode::Nearest,
  compare: None,
  lod_min_clamp: 0.0,
  lod_max_clamp: 100.0,
  ..Default::default()
}</code></pre>
                </div>
                <div class="caption">
                  <t>sampler descriptor</t>
                </div>
              </div>
            </div>
            <div class="column">
              <div class="table">
                <table>
                  <tr class="table_header">
                    <td class="table_header"></td>
                    <td>0: G-Buffer</td>
                  </tr>
                  <tr>
                    <td class="table_header">0</td>
                    <td>Sampler</td>
                  </tr>
                  <tr>
                    <td class="table_header">1</td>
                    <td>World Pos Tex</td>
                  </tr>
                  <tr>
                    <td class="table_header">2</td>
                    <td>Normal Tex</td>
                  </tr>
                  <tr>
                    <td class="table_header">3</td>
                    <td>Base Color Tex</td>
                  </tr>
                  <tr>
                    <td class="table_header">5</td>
                    <td>PBR Parameters Tex</td>
                  </tr>
                </table>
              </div>
              <p></p>
            </div>
          </div>
          <h1 id="heading1_2">
            <t>ç‚¹å…‰æº</t>
          </h1>
          <p>
            <t>åœ¨ Shader ä¸­è®¡ç®—ç‚¹å…‰æºéœ€è¦ä¸¤ä¸ªæ•°æ®ï¼Œä¸€ä¸ªæ˜¯å­˜å‚¨æ‰€æœ‰ç‚¹å…‰æºä¿¡æ¯çš„ Storage Bufferï¼Œå¦ä¸€ä¸ªæ˜¯ç‚¹å…‰æºçš„æ€»æ•°ï¼Œç”¨äºéå†ã€‚</t>
          </p>
          <h2 id="heading2_2">
            <t>Radiance of a Point Light</t>
          </h2>
          <blockquote>
            <t>ä¸‹æ–‡å°† Radiance ç¿»è¯‘ä¸ºè¾å°„ç‡ã€‚ï¼ˆ</t>
            <t class="href" onclick="window.open('https://zh.wikipedia.org/wiki/%E8%BE%90%E5%B0%84%E7%8E%87')">https://zh.wikipedia.org/wiki/è¾å°„ç‡</t>
            <t>ï¼‰</t>
          </blockquote>
          <p>
            <t>ç‚¹å…‰æºçš„è¾å°„ç‡å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼è®¡ç®—ï¼š</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">let radiance = intensity / ((decay * pow2(distance)) + 0.001);</code></pre>
            </div>
            <div class="caption"></div>
          </div>
          <p>
            <t class="code">intensity</t>
            <t> å’Œ </t>
            <t class="code">decay</t>
            <t> æ˜¯å…‰æºçš„å±æ€§ï¼Œ</t>
            <t class="code">distance</t>
            <t> æ˜¯ä¸–ç•Œç©ºé—´ä¸‹å…‰æºåˆ°ç‰‡æºçš„è·ç¦»ï¼Œä¸–ç•Œç©ºé—´ä¸‹çš„åæ ‡æ–¹æ‰è®°å½•åœ¨ G-Buffer ä¸­äº†ï¼Œ</t>
            <t class="code">+ 0.001</t>
            <t> æ˜¯ä¸ºäº†é™¤æ³•å®‰å…¨ã€‚</t>
          </p>
          <h2 id="heading2_3">
            <t>éå†å…‰æº</t>
          </h2>
          <p>
            <t>ç‚¹å…‰æºçš„æ•°é‡å­˜åœ¨äº†ä¸€ä¸ªå…¨å±€çš„å…‰ç…§ç›¸å…³çš„ Binding ä¸­çš„ä¸€ä¸ªå‘é‡é‡Œã€‚</t>
            <t class="code">light.lights_nums.x</t>
            <t> å…¶å®ƒåˆ†é‡è®¾æƒ³ç”¨äºå­˜å…¶å®ƒå…‰ç…§çš„æ•°é‡ã€‚</t>
          </p>
          <div class="code_block">
            <div class="code_part">
              <div class="code_lang">rust</div>
              <pre><code class="language-rust">    let point_lights_num = light.lights_nums.x;

    for (var i = 0u; i &lt; point_lights_num; i += 1u) {
        let li = point_lights[i];
        let world2light_unnorm = li.position.xyz - world_pos;
        let world2camera_unnorm = camera.position - world_pos;
        let dist = length(world2light_unnorm);
        if dist &gt; li.distance { continue; }
        let dir = normalize(world2light_unnorm);

        let radiance = li.intensity / ((li.decay * pow2(dist)) + 0.001); // + 0.001 for division safety
        surface_color += calculate_light(
            li.color.xyz,
            radiance,
            surface,
            dir,
            normalize(world2camera_unnorm),
        );</code></pre>
            </div>
            <div class="caption"></div>
          </div>
          <p></p>
          <h1 id="heading1_3">
            <t>å¾®è¡¨é¢ BRDF</t>
          </h1>
          <p>
            <t>é„™äººç†è®ºçŸ¥è¯†ä¸å¤Ÿæ‰å®ï¼ŒåŠ ä¹‹æœ‰è®¸å¤šå¾ˆå¥½çš„ç†è®ºèµ„æ–™ï¼Œå°±ä¸åœ¨è¿™é‡Œè¯´æ˜å¾®è¡¨é¢æ¨¡å‹ç†è®ºã€‚èµ„æ–™ä¼šåˆ—åœ¨æ–‡å°¾çš„å‚è€ƒèµ„æ–™ä¸­ã€‚</t>
          </p>
          <p>
            <t>å¾®è¡¨é¢æ¨¡å‹å®ç°çš„éš¾ç‚¹æ˜¯æ‰¾åˆ°è¯¦ç»†çš„ä¸€å¥—å‚æ•°æ ‡å‡†å’Œå…¶è·Ÿå®é™…è®¡ç®—çš„æ˜ å°„å…³ç³»çš„ã€‚ä¾‹å¦‚åœ¨å¾®è¡¨é¢æ¨¡å‹çš„è®¡ç®—ä¸ç›´æ¥å­˜åœ¨ Metallic ï¼ˆä¸‹æ–‡ç§°é‡‘å±åº¦ï¼‰å‚æ•°ã€‚é‡‘å±åº¦å®é™…å½±å“è²æ¶…å°”é¡¹ã€‚ç¿»çš„è®¸å¤šæ–‡ç« æˆ–è§†é¢‘å¹¶æ²¡æœ‰è®²æ¸…æ¥šè¿™äº›ã€‚å¥½åœ¨æœ€ç»ˆæ‰¾åˆ°äº†å¥½çš„å‚ç…§ã€‚æˆ‘å‚ç…§ filament å¼•æ“çš„å®ç°ï¼Œå¦‚æ­¤è®¾ç½®é¢å‘ç”¨æˆ·çš„å‚æ•°ï¼ˆç›®å‰å®ç°çš„éƒ¨åˆ†ï¼‰ï¼š</t>
          </p>
          <div class="column_list">
            <div class="column">
              <div class="table">
                <table>
                  <tr>
                    <td class="table_header">Parameter</td>
                    <td>Type &amp; Range</td>
                    <td></td>
                  </tr>
                  <tr>
                    <td class="table_header">BaseColor</td>
                    <td>Linear RGB [0, 1]</td>
                    <td></td>
                  </tr>
                  <tr>
                    <td class="table_header">Roughness</td>
                    <td>Scalar [0, 1]</td>
                    <td></td>
                  </tr>
                  <tr>
                    <td class="table_header">Reflectance</td>
                    <td>Scalar [0, 1]</td>
                    <td></td>
                  </tr>
                  <tr>
                    <td class="table_header">Metallic</td>
                    <td>Scalar [0, 1]</td>
                    <td></td>
                  </tr>
                </table>
              </div>
            </div>
            <div class="column">
              <p>
                <t>å…¶ä¸­ BaseColor, Reflectance, Metallic å…±åŒå†³å®šäº† f0 é¡¹ï¼ŒReflectance, Metallic ç›®å‰ä¹Ÿåªå½±å“ f0 é¡¹</t>
              </p>
              <div class="code_block">
                <div class="code_part">
                  <div class="code_lang">rust</div>
                  <pre><code class="language-rust">vec3 f0 = 0.16 * reflectance * reflectance * (1.0 - metallic) + baseColor * metallic;</code></pre>
                </div>
                <div class="caption"></div>
              </div>
            </div>
          </div>
          <p>
            <t>è¡¨æ ¼å’Œç®—æ³•å‡ºè‡ª </t>
            <t class="href" onclick="window.open('https://google.github.io/filament/Filament.html')">Physically Based Rendering in Filament</t>
            <t>ï¼ŒåŸç†å¯è§åŸæ–‡ã€‚</t>
          </p>
          <p></p>
          <h1 id="heading1_4">
            <t>æ›´å¥½çš„ Editor UI</t>
          </h1>
          <div class="image_wrapper"><img src="/devLog/1837e342-f5b5-80bc-a170-e6627eae379b/img_1867e342-f5b5-80d9-9e09-e1ef7575220c.png">
            <div class="caption"></div>
          </div>
          <p>
            <t>å¢åŠ äº†ä¸–ç•Œç‰©ä½“ç»§æ‰¿å’Œç»„ä»¶çš„ UIï¼Œå¯ä»¥ç›¸å¯¹æ–¹ä¾¿åœ°æ§åˆ¶å„ä¸ªç‰©ä½“çš„ç»„ä»¶äº†ã€‚</t>
          </p>
          <h2 id="heading2_4">
            <t>Material Override</t>
          </h2>
          <p>
            <t>å¢åŠ äº†ä¸€ä¸ªæè´¨ç»§æ‰¿çš„ç»„ä»¶ï¼Œç”¨äºè¦†ç›–æŸä¸ª Mesh çš„æè´¨ã€‚é™„åŠ åœ¨ MeshRenderer ç»„ä»¶çš„å³å¯ã€‚ä¹Ÿå› æ­¤å¯ä»¥æ–¹ä¾¿åœ°åœ¨ Inspector ä¸­è°ƒæ•´æè´¨çš„å±æ€§äº†ã€‚</t>
          </p>
          <h1 id="heading1_5">
            <t>å‚è€ƒèµ„æ–™</t>
          </h1>
          <ul>
            <li>
              <t>Romain Guy, Mathias Agopian - Physically Based Rendering in Filament </t>
              <t class="href" onclick="window.open('https://google.github.io/filament/Filament.html')">https://google.github.io/filament/Filament.html</t>
              <t>
ä¸€ç¯‡éå¸¸å¥½å’Œå…¨é¢çš„ PBR æ–‡ç« ï¼Œç»†è‡´åœ°è§£é‡Šäº† filament å®æ—¶æ¸²æŸ“å¼•æ“ä¸­çš„ PBR æ˜¯å¦‚ä½•å®ç°çš„</t>
            </li>
          </ul>
          <ul>
            <li>
              <t>Blender - åŸç†åŒ– BSDF </t>
              <t class="href" onclick="window.open('https://docs.blender.org/manual/zh-hans/3.5/render/shader_nodes/shader/principled.html')">https://docs.blender.org/manual/zh-hans/3.5/render/shader_nodes/shader/principled.html</t>
            </li>
          </ul>
          <ul>
            <li>
              <t>Boson (2020) - GraphicEngine-Tile-based Deferred Shading using Compute Shader </t>
              <t class="href" onclick="window.open('https://myboson.wordpress.com/2020/05/29/graphicengine-tiled-based-deferred-shading-using-compute-shader/')">https://myboson.wordpress.com/2020/05/29/graphicengine-tiled-based-deferred-shading-using-compute-shader/</t>
            </li>
          </ul>
          <ul>
            <li>
              <t>Jason L. McKesson (2012) - Normal Transformation </t>
              <t class="href" onclick="window.open('https://paroj.github.io/gltut/Illumination/Tut09%20Normal%20Transformation.html#idp8010')">https://paroj.github.io/gltut/Illumination/Tut09 Normal Transformation.html</t>
            </li>
          </ul>
          <p></p>
        </div>
      </div>
    </div>
  </body>
</html>
